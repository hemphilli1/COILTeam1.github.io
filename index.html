<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Brady Koenig - Professional Profile</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.1/chart.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-XXXXXXXXX-X"></script>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-WRGKGFR7M8"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-WRGKGFR7M8');
    </script>
    <script src="https://udayton-cloud.bitbucket.io/clock.js"></script>
    <style>
        body {
            background: linear-gradient(to right, #2c3e50, #4ca1af);
            color: white;
            font-family: 'Arial', sans-serif;
            padding-top: 50px;
        }
        .container {
            max-width: 900px;
            background: rgba(255, 255, 255, 0.2);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
        }
        .profile-img {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            border: 3px solid white;
            margin-bottom: 15px;
        }
        .btn-contact {
            background-color: #ff9800;
            color: white;
            padding: 10px 20px;
            border-radius: 30px;
            text-decoration: none;
            border: none;
            cursor: pointer;
            transition: 0.3s;
        }
        .btn-contact:hover {
            background-color: #e68900;
        }
        .section {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
        }
        #email {
            display: none;
            font-size: 18px;
            font-weight: bold;
        }
        #analog-clock {
            background-color: transparent;
            width: 200px;
            height: 200px;
            border-radius: 50%;
        }
        .experience {
            font-size: 18px;
            font-weight: bold;
            text-align: center;
            margin-top: 10px;
        }
        .skills {
            font-size: 16px;
            font-style: italic;
            text-align: center;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="container text-center">
        <img src="headshot.jpg" alt="Brady Koenig" class="profile-img">
        <h1>Brady Koenig</h1>
        <p>Web Developer | IT Specialist</p>
        <button class="btn-contact" id="contact-btn" onclick="showEmail()">Contact Me</button>
        <p id="email">Email: <a href='mailto:koenigb2@udayton.edu' style="color: white;">koenigb2@udayton.edu</a></p>

        <div class="section">
            <h2>Professional Experience</h2>
            <p class="experience">4 years of experience as an IT Specialist Intern</p>
            <p class="skills">Skilled in HTML, Java, and Python programming, network security, secure VPN access, remote IT support, 
                workstation configuration, and cloud computing. Proficient with collaboration tools such as GitHub, Jira, 
                and Microsoft Teams, and experienced in asset management using Snipe-IT.</p>
        </div>

        <div class="section">
            <h2>Digital & Analog Clock</h2>
            <p id="digital-clock"></p>
            <p id="clicked-time">Clicked time: None</p>
            <canvas id="analog-clock" width="200" height="200"></canvas>
            <p>Click below to update clicked time:</p>
            <button class="btn btn-light" onclick="updateClickedTime()">Update Time</button>
        </div>

        <div class="section">
            <h2>Weather Information</h2>
            <p>Enter a city to get the current weather:</p>
            <input type="text" id="city-input" class="form-control" placeholder="Enter city name...">
            <button class="btn btn-primary mt-2" onclick="getWeather()">Get Weather</button>
            <div id="weather-result" class="mt-3"></div>
            <p>Source: <a href="https://www.weatherbit.io/" target="_blank" style="color: white;">Weatherbit.io</a></p>
        </div>

        <div class="section">
            <h2>Chatbot</h2>
            <input type="text" id="chat-input" class="form-control" placeholder="Ask me anything...">
            <button class="btn btn-warning mt-2" onclick="askChatbot()">Ask</button>
            <div id="chatbot-response" class="mt-3" style="color: black;"></div>
        </div>
    </div>

    <script>
        let conversationHistory = [{ role: "user", parts: [{ text: "You are a helpful AI chatbot assisting a user." }] }];
        function showEmail() {
            document.getElementById('email').style.display = 'block';
            document.getElementById('contact-btn').style.display = 'none';
        }

        function updateDigitalClock() {
            document.getElementById('digital-clock').innerHTML = "Current time: " + new Date();
        }
        setInterval(updateDigitalClock, 500);
        
        function updateClickedTime() {
            document.getElementById('clicked-time').innerHTML = "Clicked time: " + new Date();
        }

        function askChatbot() {
            var query = document.getElementById("chat-input").value.trim();
            if (query.length === 0) return;

            let chatBox = document.getElementById("chatbot-response");
            conversationHistory.push({ role: "user", parts: [{ text: query }] });
            chatBox.innerHTML += `<div class="chat-message user-message"><strong>You:</strong> ${query}</div>`;

            let loadingMessage = document.createElement("div");
            loadingMessage.classList.add("chat-message", "chatbot-message", "loading");
            loadingMessage.innerHTML = "Waiting for response...";
            chatBox.appendChild(loadingMessage);

            let apiKey = "AIzaSyDS2ETLyUMkTptIhyLut0oTa48SkhvL9wA";
            let url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${apiKey}`;

            let requestBody = {
                contents: conversationHistory
            };

            fetch(url, {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify(requestBody)
            })
            .then(response => response.json())
            .then(data => {
                let responseText = data?.candidates?.[0]?.content?.parts?.[0]?.text || "No response from AI.";

                loadingMessage.remove();
                conversationHistory.push({ role: "assistant", parts: [{ text: responseText }] });

                chatBox.innerHTML += `<div class="chat-message chatbot-message"><strong>Chatbot:</strong> ${responseText}</div>`;

                chatBox.scrollTop = chatBox.scrollHeight;
            })
            .catch(error => {
                loadingMessage.innerHTML = "Error fetching response.";
                console.error(error);
            });

            document.getElementById("chat-input").value = "";
        }
        function getWeather() {
    let city = document.getElementById("city-input").value;
    if (city.length == 0) return;
    document.getElementById("weather-result").innerHTML = "Fetching weather...";
    
    let apiKey = "c6fe9d23ba7c44dd9bab7c83a805f744";
    let url = `https://api.weatherbit.io/v2.0/current?city=${city}&units=I&key=${apiKey}`;

    fetch(url)
        .then(response => response.json())
        .then(data => {
            document.getElementById("weather-result").innerHTML = `
                <p>Weather in ${data.data[0].city_name}: ${data.data[0].temp}Â°F, ${data.data[0].weather.description}</p>
            `;
        })
        .catch(error => {
            document.getElementById("weather-result").innerHTML = "Error fetching weather data.";
        });
    }

        var canvas = document.getElementById("analog-clock");
        var ctx = canvas.getContext("2d");
        var radius = canvas.height / 2;
        ctx.translate(radius, radius);
        radius = radius * 0.90;
        setInterval(drawClock, 1000);

        function drawClock() {
            drawFace(ctx, radius);
            drawNumbers(ctx, radius);
            drawTime(ctx, radius);
        }
    </script>
</body>
</html>
